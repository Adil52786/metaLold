\clearpage
\secrel{Критически необходимо Literate Programming}\label{litprog}

\href{https://en.wikipedia.org/wiki/Literate_programming}{Литературное
программирование}\ (LP) предложено Доналдом Кнутом как решение проблемы
\emph{передачи знаний между разработчиками}. Традиционная разработка уже 60 лет
фиксируется на редактировании файлов исходного кода. В ранние года развития ЭВМ
такой подход вполне понятен\ --- вычислительных ресурсов едва хватало. Но этот
явный косяк в подходах не был увиден и решен даже в конце 90х, когда объемы
ОЗУ исчислялились мегабайтами, и жесткий диск достаточных объемов стоял в каждом
персональном компьютере.

Сейчас широко используются различные костыльные решения типа \file{Doxygen},
\file{javadoc} и т.п., но их функционал явно недостаточен для полноценного
документирования. Они вполне применимы для справочников по API библиотек, но
документирование требует применение гипертекста, диаграмм, а иногда и сложной
математической верстки.

Парадигма LP предполагает полное объяснение логики программы на естественном
языке, в формате пояснительной записки, в которую включаются фрагменты исходного
кода, передаваемого компилятору при сборке программы. \emph{При документировании
ПО необходим функционал сквозной увязки объектов в исходном коде, и элементов
документации}\ --- такая увязка при полноценном применении LP должна
обеспечиватся представлением проекта как \term{документной базы знаний}\note{с
поддержкой перекрестных ссылок между документацией и комментариями в исходном
коде, построением индексов объектов и терминов, нечетким поиском, визуализацией
структуры программ, и т.п.}.

К сожалению, классическое LP оказалось неприменимо из-за важной особенности\ ---
\emph{каждый фрагмент исходного кода (\term{блок программы}) должен быть описан
полностью}, так как на компиляцию он передается целиком. На практике такой
подход неприменим: мы должны полностью увязать текст документации с каждым
программным блоком не только по количеству использований (только один раз), но
\emph{и по порядку}\ --- декларация функций и переменных должна идти до их
первого использования.

В то же время, \emph{документация на программный продукт\note{или
программно-аппаратный комплекс\ --- в этой книге это подразумевается, так как мы
говорим о встраиваемых системах}\ принципиально нелинейна}: вы это легко сможете
увидеть сами, если попытаетесь написать книгу по какой-нибудь достаточно сложной
программе. Книга предполагает линейное чтение, компоненты программы описываются
с разных точек зрения и в разных местах текста.
\begin{itemize}[nosep]
\item
В руководстве пользователя рассматривается интерфейс, и стыковка с внешними
системами.
\item
В руководстве программиста\note{для пользователя который планирует расширять
систему самостоятельно}\ --- API и внутреннее устройство, причем основная
реализация функция может быть описана в одном разделе, а код обеспечивающий
безопасность той же функции в другом.
\end{itemize}

Кнут предполагал уйти от написания программ с точки зрения компьютера, и
позволить программистам разрабатывать программы способами и очередностью кода,
определяемыми ходом мышления разработчика.

Пакет \file{WEB}, который использовал Кнут, работал в пакетном режиме, читал
``литературный'' код, и генерировал из него как файлы исходного кода для
компилятора, так и файлы на языке разметки документации\note{\TeX}.
В практическом смысле реализация LP должна быть сделана в IDE в виде
интерактивного просмотра документации. Изменение блоков кода должно отображаться
немедленно, или при обновлении страницы документации по команде.

Кнут утверждает, что литературное программирование обеспечивает первоклассную
систему документирования, которая не является надстройкой над процессом
разработки, а наоборот естественным образом направляет процесс разработки через
изложение своих мыслей при создании программы. Кнут описывает разработку как
\emph{построение сети абстрактных концептов} о содержании и функционале
программы, что напрямую пересекается с концептуальным программированием
\cite{tyugu} как построение абстрактной модели предметной области.

Первичность документации перед исходным кодом, и описание компонентов программы
в визуально-представимом виде стимулируют разработчика не только писать краткие
записи по вносимому коду, но и синхронизировать описание с модифицируемым кодом.
Традиционно для этого используются комментарии в коде, но система интерактивного
ввода позволяет набрасывать краткие записи\note{для таких sticky-записей вполне
подходят не только векторные диаграммы с активными элементами-ссылками на
программные элементы, но и просто ``кроки'' нарисованные мышью от руки}\ по ходу
работы, что в дальнейшем спасет legacy-разгребальщика от многодневных сессий в
отладчике и тонно-литров кофе в качестве антидепрессанта.
